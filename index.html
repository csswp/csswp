<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latest SPC Day 1 Forecast</title>
</head>
<body>
    <h1>Latest SPC Day 1 Forecast</h1>
    <pre id="forecast"></pre>

    <script>
        // Make request to fetch latest SPC Day 1 forecast
        fetch('https://api.weather.gov/products/types/day1otlk')
            .then(response => response.json())
            .then(data => {
                console.log('Day 1 Outlook Data:', data);

                if (data.hasOwnProperty('@graph') && data['@graph'].length > 0) {
                    // Extract Day 1 outlook URL from the response
                    const day1OutlookURL = data['@graph'][0]['@id'];
                    console.log('Day 1 Outlook URL:', day1OutlookURL);

                    // Fetch the Day 1 outlook data
                    fetch(day1OutlookURL)
                        .then(response => response.json())
                        .then(day1Data => {
                            console.log('Day 1 Data:', day1Data);

                            // Extract and display the forecast
                            const outlookData = day1Data.product.outlook;
                            const forecastPre = document.getElementById('forecast');
                            forecastPre.textContent = JSON.stringify(outlookData, null, 2);
                        })
                        .catch(error => {
                            console.error('Error fetching Day 1 outlook:', error);
                            document.getElementById('forecast').textContent = 'Error fetching Day 1 outlook';
                        });
                } else {
                    console.error('Day 1 outlook not found.');
                    document.getElementById('forecast').textContent = 'Day 1 outlook not found';
                }
            })
            .catch(error => {
                console.error('Error fetching Day 1 outlook products:', error);
                document.getElementById('forecast').textContent = 'Error fetching Day 1 outlook products';
            });
    </script>
</body>
</html>
